# activity 2
#1 install packages neccesaries

install.packages("nycflights13")
#2 load the libraries

library(nycflights13)
library(dplyr)

View(flights)

#3 use filter

summer_flights <- flights %>%
  filter(month == 7 | month == 8 | month == 9)

View(summer_flights)

#4 using arrange, sort flights to find the most delayed

most_delayed <- flights %>%
  arrange(desc(dep_delay))
head(most_delayed, 10)
earliest_flights <- flights %>%
  filter(!is.na(dep_time)) %>%
  arrange(dep_time)

head(earliest_flights, 10)

 #5 using select to create a new dataframe

month_day_dep <- flights %>%
  select(month, day, dep_time)

View(month_day_dep)

#6 use mutate

flights_speed <- flights %>%
  mutate(speed = distance / air_time * 60)

head(flights_speed %>% select(distance, air_time, speed), 10)

#7 summarize

avg_delay_by_origin <- flights %>%
  group_by(origin) %>%
  summarize(
    avg_dep_delay = mean(dep_delay, na.rm = TRUE),
    avg_arr_delay = mean(arr_delay, na.rm = TRUE),
    n_flights = n()
  ) %>%
  arrange(desc(avg_dep_delay))

avg_delay_by_origin


